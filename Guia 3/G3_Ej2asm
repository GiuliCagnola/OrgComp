#GUIA 3 - EJERCICIO 2

#Escribe una función recursiva que calcule el factorial de un número. 
# Entrada: a0 = n 
# Salida: a0 = n! 

.data
n: .word 4
n_factorial: .word 0

.text
.globl main
main:
	
	lw a0, n
	jal ra, factorial
	
	#guardar resultado en memoria
	la t0, n_factorial
	sw a0, 0(t0)
	
	#print
	li a7, 1
	ecall
	
	#break
	li a7, 10
	ecall
	 

#subrutina factorial
factorial:
	#caso base
	beqz a0, end
	
	#guadar ra y a0 en la pila para la recursión
	addi sp, sp, -8
	sw ra, 4(sp)
	sw a0, 0(sp)
	
	#llamada recursiva con n-1
	addi a0, a0, -1
	jal ra, factorial
	
	#restaurar n y ra
	lw t1, 0(sp) #t1=n inicial
	lw ra, 4(sp)
	addi sp, sp, 8
	
	#n*(n-1)!
	mul a0, t1, a0
	jalr x0, ra, 0

end:
	li a0, 1
	 jalr x0, ra, 0
	
	
	